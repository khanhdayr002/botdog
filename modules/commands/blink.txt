module.exports.config = {
  name: "blink",
  version: "1.0.0",
  hasPermssion: 0,
  credits: "D-Jukie",
  description: "Táº¡o 1 gif avt cÃ¡c thÃ nh viÃªn Ä‘Æ°á»£c tag",
  commandCategory: "Táº¡o áº£nh",
  usages: "[delay mentions/all delay]",
  cooldowns: 5
};
module.exports.run = async ({ event, api, args }) => {
  const fs = require('fs-extra');
  const axios = require('axios');
  var mention = Object.keys(event.mentions)
  var delay = args[0]
  var daylayAll = args[1]
  var blink = [], listID = []
  if(args[0] == 'all') {
    var participant = event.participantIDs.length
    for (var i = 0; i < participant; i++) {
    var id = event.participantIDs[i]
      listID += id + ','
    }
    let getAPI = (await axios.get(encodeURI(`https://APITPK-PHU.last-namename.repl.co/blink?apikey=Tpk05&id=${listID + ','}&delay=${parseInt(daylayAll) || 500}`), 
      { responseType: "arraybuffer" } )).data; 
      fs.writeFileSync(__dirname + "/cache/blink.gif", Buffer.from(getAPI, "utf-8") );
      blink.push(fs.createReadStream(__dirname + "/cache/blink.gif"));  
    const msg = {
    body: `ðŸ†•====ã€Ž ð—•ð—Ÿð—œð—¡ð—ž ð— ð—˜ð— ð—•ð—˜ð—¥ ã€===ðŸ†•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ‘‰ ð—•ð—®Ì£ð—» ð˜ƒð˜‚Ì›Ì€ð—® ð˜ð—®Ì£ð—¼ ð˜ð—µð—®Ì€ð—»ð—µ ð—°ð—¼Ì‚ð—»ð—´ ð—¯ð—¹ð—¶ð—»ð—¸/ð—»ð—µð—®Ìð˜† ð—ºð—®Ì†Ìð˜ ð˜ƒð—¼Ì›Ìð—¶ ð—®ð—¹ð—¹ ð˜ð—µð—®Ì€ð—»ð—µ ð˜ƒð—¶ð—²Ì‚ð—»`,
    attachment: blink
};
    return api.sendMessage(msg, event.threadID, event.messageID) 
  }
  else {
    if(!mention) return api.sendMessage('â†’ Vui lÃ²ng tag cÃ¡c thÃ nh viÃªn muá»‘n táº¡o gif cÃ¹ng', event.threadID, event.messageID);
    var mentions = mention.length
    for (var i = 0; i < mentions; i++) {
      var id = mention[i]
        listID += id + ','
    }
    let getAPI = (await axios.get(encodeURI(`https://APITPK-PHU.last-namename.repl.co/blink?apikey=Tpk05&id=${listID + ',' + event.senderID}&delay=${parseInt(delay) || 500}`), 
      { responseType: "arraybuffer" } )).data; 
      fs.writeFileSync(__dirname + "/cache/blink.gif", Buffer.from(getAPI, "utf-8") );
      blink.push(fs.createReadStream(__dirname + "/cache/blink.gif"));  
const msg = {
    body: `ðŸ†•====ã€Ž ð—•ð—Ÿð—œð—¡ð—ž ð— ð—˜ð— ð—•ð—˜ð—¥ ã€===ðŸ†•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ‘‰ ð—•ð—®Ì£ð—» ð˜ƒð˜‚Ì›Ì€ð—® ð˜ð—®Ì£ð—¼ ð˜ð—µð—®Ì€ð—»ð—µ ð—°ð—¼Ì‚ð—»ð—´ ð—¯ð—¹ð—¶ð—»ð—¸/ð—»ð—µð—®Ìð˜† ð—ºð—®Ì†Ìð˜ ð˜ƒð—¼Ì›Ìð—¶ ð—»ð—´ð˜‚Ì›ð—¼Ì›Ì€ð—¶ ð—¯ð—®Ì£ð—» ð—°ð—µð—¼Ì£ð—»`,
    attachment: blink 
};
    return api.sendMessage(msg, event.threadID, event.messageID)
  }
}